# 🏀 校园体育场馆预约系统

## 👥 共同创作者（Core Contributors）

> 本项目为团队协作完成，以下成员共同参与系统设计、开发与测试（请按实际填写）：

- 【黄志鹏】
- 【罗炜聪】  
- 【郭炜琪】  
- 【米薪霖】  
- 【吴静桐】  

---

## 📌 项目简介

本项目是一个校园体育场馆预约系统，覆盖学生端与管理员端的完整业务流程，模拟真实校园体育管理平台的运行逻辑。

系统包含：场地预约与组队预约、校园钱包与信用体系、运动社区互动、管理员后台管理等模块，适用于课程设计、教学实践、项目展示与答辩。

---

## 🚀 系统功能

### 👨‍🎓 学生端（Student Side）

**场馆预约核心**
- 精准检索空闲场地：支持按校区、场馆、运动项目多条件筛选
- 预约：动态展示各时段占用情况，支持未来一周内时段预约（不可预约过去时间）
- 多种预约模式：支持“个人预约”与“组队预约”，组队后自动同步队员记录
- 我的订单：查询历史预约，支持取消并填写取消原因（组队成员可独立取消自己的记录）

**个人中心与财务**
- 校园钱包：在线充值、消费抵扣、查看交易流水（预约/器材等）
- 信用体系：量化履约行为，信用分关联预约权限（违约可扣分）

**互动社区与保障**
- 运动论坛：发布动态、评论、删除自己的评论、点赞互动（评论区已美化）
- 报修 & 失物招领：设施故障一键报修、失物招领信息查看

---

### 🛠 管理员端（Admin Side）

**资源管控中心**
- 场馆动态配置：场地增删、价格调整、标准化 ID 映射管理
- 封场事件调度：赛事/维修等一键封场并同步公告
- 器材库存管理：修改器材价格/库存/图片，管理租借状态（借出/归还/丢失）

**全局数据审计**
- 财务数据看板：收入/退款统计，支持分析视图
- 流水穿透查询：追溯到具体用户的每一笔资金流向
- 信用奖惩执行：对违规/爽约学生执行扣分与处罚

**运维与交互管理**
- 报修闭环处理：更新维修进度状态
- 内容合规监控：对社区帖子与寻物启事进行审核与清理

---

## 📁 项目结构

```
SPORTS_BOOKING_WEB/
├── static/      # CSS、图片、JS
├── templates/   # HTML 模板（Jinja2）
├── app.py       # 核心业务与路由
├── db.py        # 数据库连接工具
├── .env         # 环境变量
├── scripts/     # 数据生成与维护脚本
└── README.md
```

---

## ⚙️ 运行方式（Windows）

### 1）创建并进入虚拟环境

```bash
python -m venv .venv
.venv\Scripts\activate
```

### 2）安装依赖

```bash
pip install -r requirements.txt
```

> 若出现网络/代理导致无法安装，请检查：
> - 是否设置了错误的 `HTTP_PROXY / HTTPS_PROXY`
> - 或使用能访问 PyPI 的网络
> - 或配置国内镜像源（如清华/阿里）

### 3）配置数据库

在 MySQL 中创建数据库（示例）：

```sql
CREATE DATABASE campus_sports_booking CHARACTER SET utf8mb4;
```

创建 `.env` 文件（项目根目录）并填写：

```env
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=你的密码
DB_NAME=campus_sports_booking
DB_PORT=3306
```

### 4）启动项目

```bash
python app.py
```

浏览器访问：

```
http://127.0.0.1:5000
```

---

## 🧪 测试内容（示例）

- 预约冲突检测（同场地同时间段不可重复预约）
- 时间限制检测（只能预约未来 7 天，不能预约过去）
- 组队预约一致性（队员自动生成记录，可独立取消并填写原因）
- 钱包扣费与流水记录
- 违约扣分与信用记录生成
- 管理员后台：封场/器材/预约/报修/财务/信用等功能

---

